# AIæ³•å¾‹åŠ©æ‰‹ - å‰ç«¯å¼€å‘è§„èŒƒ

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

**ç‰ˆæœ¬**: v2.0  
**æœ€åæ›´æ–°**: 2026-01-08  
**é€‚ç”¨èŒƒå›´**: AIæ³•å¾‹åŠ©æ‰‹ Legal Workspace v3.x

---

## ç›®å½•

1. [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
2. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
3. [ä»£ç é£æ ¼](#ä»£ç é£æ ¼)
4. [ç»„ä»¶è§„èŒƒ](#ç»„ä»¶è§„èŒƒ)
5. [å‘½åè§„èŒƒ](#å‘½åè§„èŒƒ)
6. [æ³¨é‡Šè§„èŒƒ](#æ³¨é‡Šè§„èŒƒ)
7. [æ ·å¼è§„èŒƒ](#æ ·å¼è§„èŒƒ)
8. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
9. [é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)
10. [å®‰å…¨è§„èŒƒ](#å®‰å…¨è§„èŒƒ)
11. [æµ‹è¯•è§„èŒƒ](#æµ‹è¯•è§„èŒƒ)
12. [Gitè§„èŒƒ](#gitè§„èŒƒ)

---

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶

| æŠ€æœ¯       | ç‰ˆæœ¬   | ç”¨é€”         |
| ---------- | ------ | ------------ |
| Vue 3      | 3.4.21 | å‰ç«¯æ¡†æ¶     |
| Vite       | 5.1.0  | æ„å»ºå·¥å…·     |
| Vue Router | 4.2.5  | è·¯ç”±ç®¡ç†     |
| D3.js      | 7.8.5  | æ•°æ®å¯è§†åŒ–   |
| Supabase   | 2.39.0 | åç«¯æœåŠ¡     |
| SCSS/Sass  | 1.96.0 | CSS é¢„å¤„ç†å™¨ |

### å¼€å‘å·¥å…·é“¾

| å·¥å…·        | ç‰ˆæœ¬   | ç”¨é€”           |
| ----------- | ------ | -------------- |
| ESLint      | 8.56.0 | ä»£ç æ£€æŸ¥       |
| Prettier    | 3.2.4  | ä»£ç æ ¼å¼åŒ–     |
| Vitest      | 4.0.15 | å•å…ƒæµ‹è¯•       |
| Husky       | 9.1.7  | Git Hooks ç®¡ç† |
| lint-staged | 16.2.7 | æš‚å­˜åŒºæ–‡ä»¶æ£€æŸ¥ |
| VitePress   | 1.6.4  | å¸®åŠ©ä¸­å¿ƒæ–‡æ¡£   |

### å¼€å‘çº¦å®š

- **æ„å»ºå·¥å…·**ï¼šä½¿ç”¨ Vite è¿›è¡Œå¼€å‘å’Œæ„å»º
- **ç»„ä»¶å¼€å‘**ï¼šä½¿ç”¨ Vue 3 å•æ–‡ä»¶ç»„ä»¶ (SFC, `.vue` æ–‡ä»¶)
- **æ ·å¼é¢„å¤„ç†**ï¼šä½¿ç”¨ SCSSï¼Œé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ç³»ç»Ÿ
- **ä»£ç è§„èŒƒ**ï¼šESLint + Prettier è‡ªåŠ¨æ ¼å¼åŒ–

---

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ main.js                     # åº”ç”¨å…¥å£
â”œâ”€â”€ config/                     # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ supabase.js             # Supabase é…ç½®å’Œè®¤è¯æœåŠ¡
â”œâ”€â”€ stores/                     # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ auth.js                 # è®¤è¯çŠ¶æ€ (Vue reactive)
â”œâ”€â”€ router/                     # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ index.js                # è·¯ç”±ä¸»å…¥å£
â”‚   â”œâ”€â”€ guards.js               # è·¯ç”±å®ˆå«
â”‚   â””â”€â”€ modules/                # è·¯ç”±æ¨¡å—
â”‚       â”œâ”€â”€ case.js             # æ¡ˆä»¶è·¯ç”±
â”‚       â”œâ”€â”€ document.js         # æ–‡ä¹¦è·¯ç”±
â”‚       â””â”€â”€ ...
â”œâ”€â”€ components/                 # å…¨å±€å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ layout/                 # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AppHeader.vue
â”‚   â”‚   â”œâ”€â”€ Sidebar.vue
â”‚   â”‚   â””â”€â”€ AppLayout.vue
â”‚   â”œâ”€â”€ common/                 # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ConfirmModal.vue
â”‚   â”‚   â””â”€â”€ DatePicker.vue
â”‚   â””â”€â”€ case/                   # æ¡ˆä»¶ç›¸å…³ç»„ä»¶
â”œâ”€â”€ layouts/                    # é¡µé¢å¸ƒå±€
â”‚   â”œâ”€â”€ DefaultLayout.vue
â”‚   â””â”€â”€ AuthLayout.vue
â”œâ”€â”€ features/                   # åŠŸèƒ½æ¨¡å— (Feature-Based)
â”‚   â”œâ”€â”€ case/                   # æ¡ˆä»¶ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ views/              # é¡µé¢è§†å›¾
â”‚   â”‚   â”œâ”€â”€ components/         # æ¨¡å—ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ composables/        # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ services/           # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â””â”€â”€ modules/            # å­æ¨¡å—
â”‚   â”œâ”€â”€ auth/                   # è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ document/               # æ–‡ä¹¦æ¨¡å—
â”‚   â”œâ”€â”€ legal-research/         # æ³•å¾‹æ£€ç´¢æ¨¡å—
â”‚   â”œâ”€â”€ contract/               # åˆåŒæ¨¡å—
â”‚   â””â”€â”€ system/                 # ç³»ç»Ÿæ¨¡å—
â”œâ”€â”€ services/                   # å…¨å±€æœåŠ¡å±‚
â”‚   â”œâ”€â”€ api-client.js           # API å®¢æˆ·ç«¯åŸºç±»
â”‚   â”œâ”€â”€ caseCache.js            # æ¡ˆä»¶ç¼“å­˜
â”‚   â”œâ”€â”€ faruiService.js         # æ³•ç¿ API æœåŠ¡
â”‚   â”œâ”€â”€ lprService.js           # LPR æœåŠ¡
â”‚   â””â”€â”€ llmService.js           # LLM æœåŠ¡
â”œâ”€â”€ shared/                     # å…±äº«èµ„æº
â”‚   â”œâ”€â”€ composables/            # å…±äº«ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ components/             # å…±äº«ç»„ä»¶
â”‚   â”œâ”€â”€ constants/              # å¸¸é‡å®šä¹‰
â”‚   â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”œâ”€â”€ mixins/                     # Vue Mixins (æ…ç”¨)
â”œâ”€â”€ utils/                      # å·¥å…·å‡½æ•°
â””â”€â”€ styles/                     # å…¨å±€æ ·å¼
    â”œâ”€â”€ main.scss               # æ ·å¼ä¸»å…¥å£
    â”œâ”€â”€ _variables.scss         # å˜é‡å®šä¹‰
    â”œâ”€â”€ _mixins.scss            # SCSS Mixins
    â”œâ”€â”€ animations.scss         # åŠ¨ç”»å®šä¹‰
    â”œâ”€â”€ base/                   # åŸºç¡€æ ·å¼
    â”‚   â”œâ”€â”€ _reset.scss
    â”‚   â”œâ”€â”€ _typography.scss
    â”‚   â””â”€â”€ _layout.scss
    â””â”€â”€ components/             # ç»„ä»¶æ ·å¼
        â”œâ”€â”€ _buttons.scss
        â”œâ”€â”€ _forms.scss
        â””â”€â”€ _cards.scss
```

### ç›®å½•èŒè´£

| ç›®å½•          | èŒè´£           | è§„åˆ™                               |
| ------------- | -------------- | ---------------------------------- |
| `config/`     | ç¬¬ä¸‰æ–¹æœåŠ¡é…ç½® | åªæ”¾é…ç½®å¸¸é‡å’ŒæœåŠ¡åˆå§‹åŒ–           |
| `stores/`     | å…¨å±€çŠ¶æ€       | ä½¿ç”¨ Vue reactive ç®¡ç†             |
| `router/`     | è·¯ç”±é…ç½®       | æ¨¡å—åŒ–è·¯ç”±ï¼ŒæŒ‰åŠŸèƒ½æ‹†åˆ†             |
| `components/` | å…¨å±€å¯å¤ç”¨ç»„ä»¶ | ä¸ä¸šåŠ¡æ— å…³çš„é€šç”¨ç»„ä»¶               |
| `layouts/`    | é¡µé¢å¸ƒå±€       | å®šä¹‰ä¸åŒé¡µé¢ç»“æ„çš„å¸ƒå±€ç»„ä»¶         |
| `features/`   | åŠŸèƒ½æ¨¡å—       | Feature-Based æ¶æ„ï¼Œæ¯ä¸ªæ¨¡å—è‡ªåŒ…å« |
| `services/`   | å…¨å±€ä¸šåŠ¡æœåŠ¡å±‚ | API è°ƒç”¨å°è£…ã€ç¼“å­˜ç®¡ç†             |
| `shared/`     | å…±äº«èµ„æº       | è·¨æ¨¡å—å…±äº«çš„ç»„åˆå¼å‡½æ•°ã€ç»„ä»¶ã€å¸¸é‡ |
| `styles/`     | å…¨å±€æ ·å¼       | SCSS æ¨¡å—åŒ–æ ·å¼ç³»ç»Ÿ                |

### Feature æ¨¡å—ç»“æ„

æ¯ä¸ªåŠŸèƒ½æ¨¡å—éµå¾ªä»¥ä¸‹ç»“æ„ï¼š

```
features/case/
â”œâ”€â”€ views/              # é¡µé¢çº§ç»„ä»¶
â”‚   â”œâ”€â”€ CaseList.vue
â”‚   â””â”€â”€ CaseDetail.vue
â”œâ”€â”€ components/         # æ¨¡å—å†…ç»„ä»¶
â”‚   â””â”€â”€ CaseCard.vue
â”œâ”€â”€ composables/        # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ useCaseList.js
â”‚   â”œâ”€â”€ useCaseDetail.js
â”‚   â””â”€â”€ index.js        # ç»Ÿä¸€å¯¼å‡º
â”œâ”€â”€ services/           # æ¨¡å—æœåŠ¡
â”‚   â””â”€â”€ caseService.js
â””â”€â”€ modules/            # å­æ¨¡å— (å¤§å‹æ¨¡å—æ‹†åˆ†)
    â”œâ”€â”€ CaseBasicInfo.vue
    â”œâ”€â”€ CaseEvidence.vue
    â””â”€â”€ CaseAI.vue
```

---

## ä»£ç é£æ ¼

### ESLint é…ç½®

é¡¹ç›®ä½¿ç”¨ ESLint è¿›è¡Œä»£ç æ£€æŸ¥ï¼Œé…ç½®æ–‡ä»¶ `.eslintrc.cjs`ï¼š

```javascript
module.exports = {
  root: true,
  env: {
    node: true,
    browser: true,
    es2021: true
  },
  extends: ['eslint:recommended', 'plugin:vue/vue3-recommended'],
  rules: {
    'vue/html-indent': ['warn', 2],
    'vue/require-default-prop': 'warn',
    'vue/require-prop-types': 'warn',
    'vue/require-explicit-emits': 'warn'
  }
}
```

### JavaScript è§„èŒƒ

#### ç¼©è¿›ä¸ç©ºæ ¼

```javascript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨ 2 ç©ºæ ¼ç¼©è¿›ï¼ˆç¬¦åˆ vue3-recommended è§„èŒƒï¼‰
export default {
  name: 'ComponentName',
  data() {
    return {
      value: ''
    }
  }
}
```

#### å¼•å·

```javascript
// âœ… ä½¿ç”¨å•å¼•å·
const message = 'Hello World'
import { router } from './router.js'
```

#### åˆ†å·

```javascript
// é¡¹ç›®éµå¾ª ESLint é»˜è®¤ï¼Œå¯çœç•¥åˆ†å·
const name = 'Legal Workspace'
this.loadData()
```

#### ES6+ ç‰¹æ€§

```javascript
// âœ… ä½¿ç”¨è§£æ„èµ‹å€¼
const { name, status } = this.caseData

// âœ… ä½¿ç”¨ç®­å¤´å‡½æ•°
const filtered = items.filter(item => item.active)

// âœ… ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²
const message = `æ¡ˆä»¶ ${caseId} å·²æ›´æ–°`

// âœ… ä½¿ç”¨ async/await
async loadCase(id) {
  const { data, error } = await caseService.getCase(id)
}
```

---

## ç»„ä»¶è§„èŒƒ

### Vue SFC ç»“æ„

ç»„ä»¶æŒ‰ä»¥ä¸‹é¡ºåºç»„ç»‡ï¼š

```vue
<template>
  <div class="component-name">
    <!-- æ¨¡æ¿å†…å®¹ -->
  </div>
</template>

<script>
// 1. å¯¼å…¥ä¾èµ–
import { ref, computed, onMounted } from 'vue'
import SomeComponent from './SomeComponent.vue'
import { useSomeComposable } from '@/composables'

export default {
  // 2. ç»„ä»¶æ ‡è¯†
  name: 'ComponentName',

  // 3. ç»„ä»¶ä¾èµ–
  components: {
    SomeComponent
  },

  // 4. Props å®šä¹‰
  props: {
    title: {
      type: String,
      required: true
    },
    items: {
      type: Array,
      default: () => []
    }
  },

  // 5. Emits å£°æ˜
  emits: ['update', 'delete'],

  // 6. å“åº”å¼æ•°æ®
  data() {
    return {
      // è¡¨å•æ•°æ®
      formData: {},
      // UI çŠ¶æ€
      isLoading: false,
      showModal: false
    }
  },

  // 7. è®¡ç®—å±æ€§
  computed: {
    fullName() {
      return `${this.firstName} ${this.lastName}`
    }
  },

  // 8. ä¾¦å¬å™¨
  watch: {
    searchQuery(newVal) {
      this.debouncedSearch(newVal)
    }
  },

  // 9. ç”Ÿå‘½å‘¨æœŸé’©å­ï¼ˆæŒ‰æ‰§è¡Œé¡ºåºï¼‰
  created() {},
  mounted() {},
  beforeUnmount() {},

  // 10. æ–¹æ³•
  methods: {
    // === æ•°æ®åŠ è½½ ===
    async loadData() {},

    // === äº‹ä»¶å¤„ç† ===
    handleSubmit() {},

    // === å·¥å…·æ–¹æ³• ===
    formatDate(date) {}
  }
}
</script>

<style scoped>
/* ç»„ä»¶å±€éƒ¨æ ·å¼ */
.component-name {
  /* ... */
}
</style>
```

### Composition API é£æ ¼

æ¨èä½¿ç”¨ç»„åˆå¼å‡½æ•°ï¼ˆComposablesï¼‰å°è£…å¯å¤ç”¨é€»è¾‘ï¼š

```javascript
// composables/useCaseList.js
import { ref, computed } from 'vue'
import { caseService } from '@/services'

export function useCaseList() {
  const cases = ref([])
  const isLoading = ref(false)
  const error = ref(null)

  const activeCases = computed(() => cases.value.filter(c => c.status === 'active'))

  async function loadCases() {
    isLoading.value = true
    error.value = null
    try {
      const { data } = await caseService.getCases()
      cases.value = data
    } catch (err) {
      error.value = err.message
    } finally {
      isLoading.value = false
    }
  }

  return {
    cases,
    activeCases,
    isLoading,
    error,
    loadCases
  }
}
```

### æ¨¡æ¿è§„èŒƒ

#### å±æ€§é¡ºåº

```html
<!-- æŒ‰æ­¤é¡ºåºä¹¦å†™å±æ€§ -->
<div
  ref="container"
  class="class-name"
  :class="dynamicClass"
  :style="dynamicStyle"
  v-if="condition"
  v-for="item in items"
  :key="item.id"
  @click="handleClick"
></div>
```

#### æ¡ä»¶æ¸²æŸ“

```html
<!-- âœ… ç®€å•æ¡ä»¶ä½¿ç”¨ v-if -->
<div v-if="isVisible">å†…å®¹</div>

<!-- âœ… å¤šæ¡ä»¶ä½¿ç”¨ v-else-if -->
<div v-if="status === 'loading'">åŠ è½½ä¸­...</div>
<div v-else-if="status === 'error'">å‡ºé”™äº†</div>
<div v-else>æ­£å¸¸å†…å®¹</div>

<!-- âœ… é¢‘ç¹åˆ‡æ¢ä½¿ç”¨ v-show -->
<div v-show="isExpanded">å±•å¼€å†…å®¹</div>
```

#### åˆ—è¡¨æ¸²æŸ“

```html
<!-- âœ… å§‹ç»ˆæä¾›å”¯ä¸€ key -->
<li v-for="item in items" :key="item.id">{{ item.name }}</li>

<!-- âŒ é¿å…ä½¿ç”¨ index ä½œä¸º keyï¼ˆé™¤éåˆ—è¡¨ä¸ä¼šå˜åŒ–ï¼‰ -->
<li v-for="(item, index) in items" :key="index"></li>
```

---

## å‘½åè§„èŒƒ

### æ–‡ä»¶å‘½å

| ç±»å‹       | è§„åˆ™       | ç¤ºä¾‹                                         |
| ---------- | ---------- | -------------------------------------------- |
| Vue ç»„ä»¶   | PascalCase | `CaseDetail.vue`, `UserProfile.vue`          |
| ç»„åˆå¼å‡½æ•° | camelCase  | `useCaseList.js`, `useModal.js`              |
| æœåŠ¡æ–‡ä»¶   | camelCase  | `caseService.js`, `apiClient.js`             |
| æ ·å¼æ–‡ä»¶   | kebab-case | `main.scss`, `_variables.scss`               |
| å¸¸é‡æ–‡ä»¶   | camelCase  | `constants.js`, `caseStatus.js`              |
| æµ‹è¯•æ–‡ä»¶   | \*.spec.js | `caseService.spec.js`, `useCaseList.spec.js` |

### JavaScript å‘½å

| ç±»å‹       | è§„åˆ™               | ç¤ºä¾‹                                     |
| ---------- | ------------------ | ---------------------------------------- |
| ç»„ä»¶å     | PascalCase         | `CaseList`, `AppLayout`                  |
| å˜é‡/å‡½æ•°  | camelCase          | `caseData`, `loadCaseList()`             |
| å¸¸é‡       | UPPER_SNAKE_CASE   | `API_BASE_URL`, `MAX_FILE_SIZE`          |
| ç»„åˆå¼å‡½æ•° | use å‰ç¼€           | `useCaseList`, `useModal`                |
| æœåŠ¡ç±»     | åç¼€ Service       | `caseService`, `authService`             |
| å¸ƒå°”å€¼     | is/has/should å‰ç¼€ | `isLoading`, `hasError`, `shouldRefresh` |
| äº‹ä»¶å¤„ç†   | handle/on å‰ç¼€     | `handleSubmit`, `onFileSelect`           |
| å¼‚æ­¥æ–¹æ³•   | åŠ¨è¯å¼€å¤´           | `fetchData`, `loadCase`, `saveForm`      |

### CSS/SCSS å‘½å

é‡‡ç”¨ **BEM-like** å‘½åè§„èŒƒï¼š

```scss
/* Block: ç‹¬ç«‹ç»„ä»¶ */
.smart-card {
}

/* Element: ç»„ä»¶å†…éƒ¨å…ƒç´  */
.smart-card-header {
}
.smart-card-body {
}
.smart-card-footer {
}

/* Modifier: çŠ¶æ€å˜ä½“ */
.smart-card.is-loading {
}
.smart-btn-primary {
}
.smart-btn-secondary {
}
```

### å‰ç¼€çº¦å®š

| å‰ç¼€      | ç”¨é€”           | ç¤ºä¾‹                                     |
| --------- | -------------- | ---------------------------------------- |
| `smart-`  | é€šç”¨ç»„ä»¶æ ·å¼   | `smart-btn`, `smart-input`, `smart-card` |
| `modern-` | ç°ä»£åŒ–å¡ç‰‡æ ·å¼ | `modern-card`                            |
| `modal-`  | æ¨¡æ€æ¡†ç›¸å…³     | `modal-overlay`, `modal-container`       |
| `status-` | çŠ¶æ€æ ·å¼       | `status-active`, `status-closed`         |
| `is-`     | çŠ¶æ€ç±»         | `is-loading`, `is-active`, `is-disabled` |

---

## æ³¨é‡Šè§„èŒƒ

### æ–‡ä»¶å¤´æ³¨é‡Š

```javascript
/**
 * CaseDetail.vue - æ¡ˆä»¶è¯¦æƒ…é¡µ
 *
 * åŠŸèƒ½ï¼šå±•ç¤ºæ¡ˆä»¶è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…å«åŸºç¡€ä¿¡æ¯ã€å½“äº‹äººã€è¯æ®ã€AIåˆ†æç­‰æ ‡ç­¾é¡µ
 *
 * @author Alpha&Leader Legal Tech
 * @version 3.3
 * @lastUpdate 2026-01-08
 */
```

### åŒºå—æ³¨é‡Š

```javascript
data() {
  return {
    // ========== æ¡ˆä»¶åŸºç¡€æ•°æ® ==========
    caseData: {},

    // ========== UI çŠ¶æ€ ==========
    activeTab: 'basic',
    showEditModal: false,

    // ========== è¡¨å•æ•°æ® ==========
    editForm: {}
  }
},

methods: {
  // ========== æ•°æ®åŠ è½½æ–¹æ³• ==========
  loadCaseData(id) {},

  // ========== äº‹ä»¶å¤„ç†æ–¹æ³• ==========
  handleSave() {},

  // ========== å·¥å…·æ–¹æ³• ==========
  formatDate(date) {}
}
```

### JSDoc å‡½æ•°æ³¨é‡Š

```javascript
/**
 * æ ¼å¼åŒ–é‡‘é¢æ˜¾ç¤º
 * @param {number} amount - é‡‘é¢æ•°å€¼
 * @param {string} [currency='CNY'] - è´§å¸ç±»å‹
 * @returns {string} æ ¼å¼åŒ–åçš„é‡‘é¢å­—ç¬¦ä¸²
 * @example
 * formatCurrency(50000) // "Â¥50,000.00"
 */
formatCurrency(amount, currency = 'CNY') {
  // ...
}
```

### TODO æ³¨é‡Š

```javascript
// TODO: æ¥å…¥åç«¯ API æ›¿æ¢æ¨¡æ‹Ÿæ•°æ®
// FIXME: ä¿®å¤å¤§æ–‡ä»¶ä¸Šä¼ è¶…æ—¶é—®é¢˜
// HACK: ä¸´æ—¶æ–¹æ¡ˆï¼Œç­‰å¾… Supabase ä¿®å¤åç§»é™¤
// NOTE: æ­¤å¤„éœ€è¦ç‰¹åˆ«æ³¨æ„è¾¹ç•Œæƒ…å†µ
```

---

## æ ·å¼è§„èŒƒ

### SCSS æ¨¡å—ç³»ç»Ÿ

é¡¹ç›®ä½¿ç”¨ SCSS ç°ä»£æ¨¡å—ç³»ç»Ÿ (`@use` / `@forward`)ï¼š

```scss
// main.scss - æ ·å¼å…¥å£
@use 'variables' as vars;
@use 'mixins';

// ä½¿ç”¨å˜é‡
.component {
  color: vars.$primary-color;
  padding: vars.$spacing-md;
}

// ä½¿ç”¨ mixin
.button {
  @include mixins.flex-center;
}
```

### è®¾è®¡ç³»ç»Ÿå˜é‡

ä½¿ç”¨ç»Ÿä¸€çš„è®¾è®¡å˜é‡ï¼ˆå®šä¹‰åœ¨ `_variables.scss`ï¼‰ï¼š

```scss
// é¢œè‰²ç³»ç»Ÿ
$primary-color: #1a73e8;
$success-color: #34a853;
$warning-color: #fbbc04;
$error-color: #ea4335;

// ç°åº¦ç³»ç»Ÿ
$gray-50: #f8f9fa;
$gray-100: #f1f3f4;
// ...

// é—´è·ç³»ç»Ÿ
$spacing-xs: 4px;
$spacing-sm: 8px;
$spacing-md: 16px;
$spacing-lg: 24px;
$spacing-xl: 32px;

// åœ†è§’
$border-radius-sm: 4px;
$border-radius-base: 8px;
$border-radius-lg: 12px;

// é˜´å½±
$shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
$shadow-base: 0 4px 6px rgba(0, 0, 0, 0.1);
$shadow-lg: 0 10px 24px rgba(0, 0, 0, 0.15);

// è¿‡æ¸¡åŠ¨ç”»
$transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
$transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);

// å“åº”å¼æ–­ç‚¹
$breakpoint-sm: 640px;
$breakpoint-md: 768px;
$breakpoint-lg: 1024px;
$breakpoint-xl: 1280px;
```

### Scoped æ ·å¼

Vue ç»„ä»¶ä¼˜å…ˆä½¿ç”¨ `scoped` æ ·å¼ï¼š

```vue
<style scoped>
.component-name {
  /* å±€éƒ¨æ ·å¼ï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€ */
}
</style>
```

éœ€è¦ç©¿é€å­ç»„ä»¶æ—¶ä½¿ç”¨ `:deep()` é€‰æ‹©å™¨ï¼š

```scss
<style scoped>
.parent :deep(.child-class) {
  /* ç©¿é€åˆ°å­ç»„ä»¶ */
}
</style>
```

---

## æ€§èƒ½ä¼˜åŒ–

### ç»„ä»¶æ‡’åŠ è½½

```javascript
// router ä¸­ä½¿ç”¨åŠ¨æ€å¯¼å…¥
const routes = [
  {
    path: '/case/:id',
    component: () => import('@features/case/views/CaseDetail.vue')
  }
]
```

### åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–

```javascript
// âœ… ä½¿ç”¨ computed è¿‡æ»¤åˆ—è¡¨
computed: {
  filteredCases() {
    return this.cases.filter(c => c.status === this.filter)
  }
}

// âŒ é¿å…åœ¨æ¨¡æ¿ä¸­ç›´æ¥è¿‡æ»¤
// v-for="item in cases.filter(c => c.status === filter)"
```

### é˜²æŠ–ä¸èŠ‚æµ

```javascript
// âœ… æœç´¢é˜²æŠ–
import { debounce } from '@/shared/utils'

created() {
  this.debouncedSearch = debounce(this.performSearch, 300)
}
```

### è¯·æ±‚ç¼“å­˜

ä½¿ç”¨ API Client çš„ç¼“å­˜åŠŸèƒ½ï¼š

```javascript
// è·å–å¸¦ç¼“å­˜çš„æ•°æ®
const data = await apiClient.cachedGet('/api/cases', {
  cacheTime: 5 * 60 * 1000 // 5åˆ†é’Ÿç¼“å­˜
})

// å†™æ“ä½œåæ¸…é™¤ç¼“å­˜
await apiClient.post('/api/cases', newCase)
apiClient.invalidateCache('/api/cases')
```

### å¤§ç»„ä»¶æ‹†åˆ†

```javascript
// âœ… å°†å¤§ç»„ä»¶æ‹†åˆ†ä¸ºå­æ¨¡å—
// CaseDetail.vue â†’ modules/CaseBasicInfo.vue, CaseEvidence.vue, CaseAI.vue

// âŒ é¿å…å•æ–‡ä»¶è¶…è¿‡ 500 è¡Œä»£ç 
```

---

## é”™è¯¯å¤„ç†

### å¼‚æ­¥é”™è¯¯å¤„ç†

```javascript
// âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¨¡å¼
async loadData() {
  this.isLoading = true
  this.error = null

  try {
    const { data, error } = await caseService.getCase(this.id)
    if (error) throw error
    this.caseData = data
  } catch (err) {
    this.error = 'åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•'
    console.error('Failed to load data:', err)
  } finally {
    this.isLoading = false
  }
}
```

### ç”¨æˆ·åé¦ˆ

```javascript
// âœ… æä¾›æ¸…æ™°çš„é”™è¯¯æç¤º
if (!this.form.name) {
  this.showToast('è¯·è¾“å…¥æ¡ˆä»¶åç§°', 'error')
  return
}

// âœ… æ“ä½œæˆåŠŸåé¦ˆ
this.showToast('ä¿å­˜æˆåŠŸ', 'success')
```

### é”™è¯¯è¾¹ç•Œ

```html
<!-- âœ… ä½¿ç”¨ v-if å¤„ç†ç©ºçŠ¶æ€ -->
<template v-if="data">
  <div class="content">{{ data.name }}</div>
</template>
<template v-else-if="isLoading">
  <div class="loading">åŠ è½½ä¸­...</div>
</template>
<template v-else-if="error">
  <div class="error">{{ error }}</div>
</template>
<template v-else>
  <div class="empty">æš‚æ— æ•°æ®</div>
</template>
```

---

## å®‰å…¨è§„èŒƒ

### XSS é˜²æŠ¤

```html
<!-- âœ… ä½¿ç”¨ v-text æˆ– {{ }} è‡ªåŠ¨è½¬ä¹‰ -->
<div>{{ userInput }}</div>

<!-- âš ï¸ è°¨æ…ä½¿ç”¨ v-htmlï¼Œä»…ç”¨äºå¯ä¿¡å†…å®¹ -->
<div v-html="trustedHtml"></div>

<!-- âŒ ç»ä¸ç›´æ¥æ’å…¥ç”¨æˆ·è¾“å…¥çš„ HTML -->
```

### æ•æ„Ÿæ•°æ®

```javascript
// âœ… å¯†ç å­—æ®µä½¿ç”¨ type="password"
<input type="password" v-model="password">

// âœ… æ•æ„Ÿæ•°æ®ä¸æ‰“å°åˆ°æ§åˆ¶å°ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
if (import.meta.env.DEV) {
  console.log('Debug:', data)
}

// âœ… API Key é€šè¿‡ç¯å¢ƒå˜é‡ç®¡ç†
const API_KEY = import.meta.env.VITE_API_KEY
```

### è¡¨å•éªŒè¯

```javascript
// âœ… å®¢æˆ·ç«¯éªŒè¯ + æœåŠ¡ç«¯éªŒè¯
validateForm() {
  if (!this.email || !this.isValidEmail(this.email)) {
    return { valid: false, message: 'è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€' }
  }
  return { valid: true }
}
```

---

## æµ‹è¯•è§„èŒƒ

### æµ‹è¯•å·¥å…·

é¡¹ç›®ä½¿ç”¨ Vitest è¿›è¡Œå•å…ƒæµ‹è¯•ï¼š

```bash
# è¿è¡Œæµ‹è¯•
npm run test

# è¿è¡Œæµ‹è¯•å¹¶å¯ç”¨ UI
npm run test:ui

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

### æµ‹è¯•æ–‡ä»¶ç»„ç»‡

```
src/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ caseService.js
â”‚   â””â”€â”€ __tests__/
â”‚       â””â”€â”€ caseService.spec.js
â”œâ”€â”€ features/case/
â”‚   â”œâ”€â”€ composables/
â”‚   â”‚   â”œâ”€â”€ useCaseList.js
â”‚   â”‚   â””â”€â”€ __tests__/
â”‚   â”‚       â””â”€â”€ useCaseList.spec.js
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ __tests__/
â”‚           â””â”€â”€ CaseCard.spec.js
```

### æµ‹è¯•ç¤ºä¾‹

```javascript
// services/__tests__/caseService.spec.js
import { describe, it, expect, vi } from 'vitest'
import { caseService } from '../caseService'

describe('caseService', () => {
  describe('getCases', () => {
    it('åº”è¯¥è¿”å›æ¡ˆä»¶åˆ—è¡¨', async () => {
      const { data, error } = await caseService.getCases()
      expect(error).toBeNull()
      expect(Array.isArray(data)).toBe(true)
    })
  })
})
```

---

## Gitè§„èŒƒ

### åˆ†æ”¯å‘½å

| ç±»å‹     | æ ¼å¼               | ç¤ºä¾‹                          |
| -------- | ------------------ | ----------------------------- |
| åŠŸèƒ½åˆ†æ”¯ | `feature/åŠŸèƒ½æè¿°` | `feature/ragflow-integration` |
| ä¿®å¤åˆ†æ”¯ | `fix/é—®é¢˜æè¿°`     | `fix/login-redirect-loop`     |
| ä¼˜åŒ–åˆ†æ”¯ | `refactor/æè¿°`    | `refactor/case-detail-tabs`   |
| ç‰ˆæœ¬åˆ†æ”¯ | `vç‰ˆæœ¬å·`          | `v3.10`, `v3.14`              |

### Commit ä¿¡æ¯æ ¼å¼

```
<type>(<scope>): <subject>

<body>

<footer>
```

#### Type ç±»å‹

| Type       | æè¿°                   |
| ---------- | ---------------------- |
| `feat`     | æ–°åŠŸèƒ½                 |
| `fix`      | Bug ä¿®å¤               |
| `docs`     | æ–‡æ¡£æ›´æ–°               |
| `style`    | ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰ |
| `refactor` | ä»£ç é‡æ„               |
| `perf`     | æ€§èƒ½ä¼˜åŒ–               |
| `test`     | æµ‹è¯•ç›¸å…³               |
| `chore`    | æ„å»º/é…ç½®å˜æ›´          |

#### ç¤ºä¾‹

```
feat(case): æ·»åŠ æ¡ˆä»¶ç»“æ¡ˆåŠŸèƒ½

- åœ¨æ¡ˆä»¶åˆ—è¡¨é¡µæ·»åŠ ç»“æ¡ˆæŒ‰é’®
- å®ç°ç»“æ¡ˆç¡®è®¤å¯¹è¯æ¡†
- å·²ç»“æ¡ˆæ¡ˆä»¶åªè¯»ä¿æŠ¤

Closes #123
```

### Pre-commit Hooks

é¡¹ç›®ä½¿ç”¨ Husky + lint-staged è‡ªåŠ¨æ ¼å¼åŒ–ï¼š

```json
// package.json
"lint-staged": {
  "*.{js,vue}": [
    "eslint --fix",
    "prettier --write"
  ],
  "*.{css,md,json}": [
    "prettier --write"
  ]
}
```

---

## é™„å½•

### è·¯å¾„åˆ«å

é¡¹ç›®é…ç½®äº†ä»¥ä¸‹è·¯å¾„åˆ«åï¼ˆåœ¨ `vite.config.js` ä¸­å®šä¹‰ï¼‰ï¼š

| åˆ«å        | è·¯å¾„             | ç”¨é€”       |
| ----------- | ---------------- | ---------- |
| `@`         | `./src`          | æºç æ ¹ç›®å½• |
| `@features` | `./src/features` | åŠŸèƒ½æ¨¡å—   |
| `@shared`   | `./src/shared`   | å…±äº«èµ„æº   |
| `@layouts`  | `./src/layouts`  | å¸ƒå±€ç»„ä»¶   |
| `@stores`   | `./src/stores`   | çŠ¶æ€ç®¡ç†   |
| `@services` | `./src/services` | æœåŠ¡å±‚     |

### å¸¸ç”¨å·¥å…·å‡½æ•°

```javascript
// æ—¥æœŸæ ¼å¼åŒ–
formatDate(date) {
  return new Date(date).toLocaleDateString('zh-CN')
}

// é‡‘é¢æ ¼å¼åŒ–
formatCurrency(amount) {
  return new Intl.NumberFormat('zh-CN', {
    style: 'currency',
    currency: 'CNY'
  }).format(amount)
}

// æ–‡ä»¶å¤§å°æ ¼å¼åŒ–
formatSize(bytes) {
  const units = ['B', 'KB', 'MB', 'GB']
  let i = 0
  while (bytes >= 1024 && i < units.length - 1) {
    bytes /= 1024
    i++
  }
  return `${bytes.toFixed(2)} ${units[i]}`
}

// é˜²æŠ–
function debounce(fn, delay) {
  let timer = null
  return function(...args) {
    clearTimeout(timer)
    timer = setTimeout(() => fn.apply(this, args), delay)
  }
}
```

### ç¯å¢ƒå˜é‡

é¡¹ç›®ä½¿ç”¨ Vite ç¯å¢ƒå˜é‡ï¼š

```bash
# .env
VITE_API_BASE_URL=https://api.example.com
VITE_SUPABASE_URL=https://xxx.supabase.co
VITE_SUPABASE_ANON_KEY=xxx
VITE_HELP_CENTER_URL=http://localhost:5174/help
```

åœ¨ä»£ç ä¸­ä½¿ç”¨ï¼š

```javascript
const apiUrl = import.meta.env.VITE_API_BASE_URL
const isDev = import.meta.env.DEV
const isProd = import.meta.env.PROD
```

---

**æ–‡æ¡£ç»´æŠ¤**: AIæ³•å¾‹åŠ©æ‰‹å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2026-01-08  
**æ–‡æ¡£ç‰ˆæœ¬**: v2.0
